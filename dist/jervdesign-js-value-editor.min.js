/*! jervdesign-js-value-editor 2016-07-08 */

angular.module("JervDesignJsValueEditor",[]);var JervDesignJsValueEditorConfig={schemaConfig:{"field.name":{type:"literal",title:"Field",required:!0,filterValidate:null}},types:{literal:"JervDesignJsValueEditorDataTypeLiteral",string:"JervDesignJsValueEditorDataTypeString",null:"JervDesignJsValueEditorDataTypeNull",number:"JervDesignJsValueEditorDataTypeNumber",object:"JervDesignJsValueEditorDataTypeObject",array:"JervDesignJsValueEditorDataTypeArray",boolean:"JervDesignJsValueEditorDataTypeBoolean"},"type-changer":{description:"Handles changing types",directive:"jervdesign-js-value-editor-type-changer"},distPath:"/vendor/jervdesign-js-value-editor/dist/"};angular.module("JervDesignJsValueEditor").run(["JervDesignJsValueEditorService","JervDesignJsValueEditorDataTypeLiteral","JervDesignJsValueEditorDataTypeString","JervDesignJsValueEditorDataTypeNull","JervDesignJsValueEditorDataTypeNumber","JervDesignJsValueEditorDataTypeObject","JervDesignJsValueEditorDataTypeArray","JervDesignJsValueEditorDataTypeBoolean",function(JervDesignJsValueEditorService,JervDesignJsValueEditorDataTypeLiteral,JervDesignJsValueEditorDataTypeString,JervDesignJsValueEditorDataTypeNull,JervDesignJsValueEditorDataTypeNumber,JervDesignJsValueEditorDataTypeObject,JervDesignJsValueEditorDataTypeArray,JervDesignJsValueEditorDataTypeBoolean){JervDesignJsValueEditorService.setTypeService(JervDesignJsValueEditorDataTypeLiteral),JervDesignJsValueEditorService.setTypeService(JervDesignJsValueEditorDataTypeString),JervDesignJsValueEditorService.setTypeService(JervDesignJsValueEditorDataTypeNull),JervDesignJsValueEditorService.setTypeService(JervDesignJsValueEditorDataTypeNumber),JervDesignJsValueEditorService.setTypeService(JervDesignJsValueEditorDataTypeObject),JervDesignJsValueEditorService.setTypeService(JervDesignJsValueEditorDataTypeArray),JervDesignJsValueEditorService.setTypeService(JervDesignJsValueEditorDataTypeBoolean)}]);var JervDesignJsValueEditorDataSchema=function(){var self=this;self.type="literal",self.name="",self.value=null,self.displayValue="",self.title=self.name,self.directive=null,self.filterValidate=function(){return new JervDesignJsValueEditorFilterValidateResult},self.addDisplayValue=null};angular.module("JervDesignJsValueEditor").factory("JervDesignJsValueEditorDataSchema",[function(){return JervDesignJsValueEditorDataSchema}]);var JervDesignJsValueEditorFilterDataType=function(){var dataType=this;dataType.type="DEFAULT",dataType.description="DEFAULT",dataType.directive="",dataType.display=!0,dataType.buildSchemaValues=function(name,value,schema){},dataType.getDisplayValue=function(name,value){return JSON.stringify(value)},dataType.getDataValue=function(name,displayValue){return JSON.parse(displayValue)},dataType.filterValidate=function(name,value){return new JervDesignJsValueEditorFilterValidateResult}};angular.module("JervDesignJsValueEditor").factory("JervDesignJsValueEditorFilterDataType",[function(){return JervDesignJsValueEditorFilterDataType}]);var JervDesignJsValueEditorFilterValidateResult=function(){var self=this;self.message="OK",self.isValid=!0};angular.module("JervDesignJsValueEditor").factory("JervDesignJsValueEditorFilterValidateResult",function(){return JervDesignJsValueEditorFilterValidateResult}),angular.module("JervDesignJsValueEditor").service("JervDesignJsValueEditorDataTypeArray",["JervDesignJsValueEditorFilterDataType","JervDesignJsValueEditorService",function(JervDesignJsValueEditorFilterDataType,JervDesignJsValueEditorService){var service=new JervDesignJsValueEditorFilterDataType;return service.type="array",service.description="Handles array",service.directive="jerv-design-js-value-editor-field-literal",service.display=!1,service.buildSchemaValues=function(name,value,schemas){for(var i=0;i<value.length;i++)JervDesignJsValueEditorService.getDataSchema(name+"."+i,value[i],schemas)},service}]),angular.module("JervDesignJsValueEditor").service("JervDesignJsValueEditorDataTypeBoolean",["JervDesignJsValueEditorFilterDataType",function(JervDesignJsValueEditorFilterDataType){var service=new JervDesignJsValueEditorFilterDataType;return service.type="boolean",service.description="Handles booleans",service.directive="jerv-design-js-value-editor-field-boolean",service}]),angular.module("JervDesignJsValueEditor").service("JervDesignJsValueEditorDataTypeLiteral",["JervDesignJsValueEditorFilterDataType",function(JervDesignJsValueEditorFilterDataType){var service=new JervDesignJsValueEditorFilterDataType;return service.type="literal",service.description="Handles literals as strings",service.directive="jerv-design-js-value-editor-field-literal",service}]),angular.module("JervDesignJsValueEditor").service("JervDesignJsValueEditorDataTypeNull",["JervDesignJsValueEditorFilterDataType",function(JervDesignJsValueEditorFilterDataType){var service=new JervDesignJsValueEditorFilterDataType;return service.type="null",service.description="Handles nulls",service.directive="jerv-design-js-value-editor-field-literal",service}]),angular.module("JervDesignJsValueEditor").service("JervDesignJsValueEditorDataTypeNumber",["JervDesignJsValueEditorFilterDataType",function(JervDesignJsValueEditorFilterDataType){var service=new JervDesignJsValueEditorFilterDataType;return service.type="number",service.description="Handles numbers",service.directive="jerv-design-js-value-editor-field-number",service}]),angular.module("JervDesignJsValueEditor").service("JervDesignJsValueEditorDataTypeObject",["JervDesignJsValueEditorFilterDataType","JervDesignJsValueEditorService",function(JervDesignJsValueEditorFilterDataType,JervDesignJsValueEditorService){var service=new JervDesignJsValueEditorFilterDataType;return service.type="object",service.description="Handles objects",service.directive="jerv-design-js-value-editor-field-literal",service.display=!1,service.buildSchemaValues=function(name,value,schemas){for(var prop in value)JervDesignJsValueEditorService.getDataSchema(name+"."+prop,value[prop],schemas)},service}]),angular.module("JervDesignJsValueEditor").service("JervDesignJsValueEditorDataTypeString",["JervDesignJsValueEditorFilterDataType",function(JervDesignJsValueEditorFilterDataType){var service=new JervDesignJsValueEditorFilterDataType;return service.type="string",service.description="Handles strings and nulls",service.directive="jerv-design-js-value-editor-field-string",service}]);var JervDesignJsValueEditorService=function(JervDesignJsValueEditorDataSchema){var self=this,typeServices={};self.libPath="/bower_components/jervdesign-js-value-editor/dist/",self.setTypeService=function(dataType){typeServices[dataType.type]&&console.warn("Duplicate type set for "+dataType.type),typeServices[dataType.type]=dataType},self.getTypeService=function(type){if(!typeServices[type])throw"Type not found:"+type;return typeServices[type]},self.getType=function(name,value){var type=self.typeOf(value);return typeServices[type]||(console.warn("Type "+type+" service not available, using literal"),type="literal"),type},self.typeOf=function(value){return null===value?"null":void 0===value?"null":Array.isArray(value)?"array":typeof value},self.getDataSchema=function(name,value,schemas){schemas||(schemas={}),name||(name="");var type=self.getType(name,value),schema=new JervDesignJsValueEditorDataSchema;return schema.type=type,schema.name=name,schema.value=value,schema.original=value,schema.displayValue=JSON.stringify(value),schema.directive=typeServices[type].directive,schema.display=typeServices[type].display,typeServices[type].buildSchemaValues(name,value,schemas),schemas[name]=schema,schemas},self.getDisplayValue=function(name,value){var type=self.getType(name,value);return typeServices[type].getDisplayValue(name,value)},self.getDataValue=function(name,value){var type=self.getType(name,value);return typeServices[type].getDataValue(name,value)},self.filterValidate=function(schema){var type=self.getType(name,value);return typeServices[type].filterValidate(name,value)}};angular.module("JervDesignJsValueEditor").service("JervDesignJsValueEditorService",["JervDesignJsValueEditorDataSchema",function(JervDesignJsValueEditorDataSchema){return new JervDesignJsValueEditorService(JervDesignJsValueEditorDataSchema)}]),angular.module("JervDesignJsValueEditor").directive("jervDesignJsValueEditorStandardDisplay",["$compile","JervDesignJsValueEditorService",function($compile,JervDesignJsValueEditorService){function link($scope,element,attrs){var rootNamespace=attrs.rootNamespace;rootNamespace||(rootNamespace="root"),$scope.valueData||console.error("value-data attribute missing or empty"),$scope.schemas=JervDesignJsValueEditorService.getDataSchema(rootNamespace,$scope.valueData),console.log($scope.valueData),console.log($scope.schemas);var displayElm=element.find(".scheme-entries");displayElm.empty();var directiveElm,directiveName,directiveValue;for(var ns in $scope.schemas)$scope.schemas[ns].display&&ns!==rootNamespace&&(directiveName=$scope.schemas[ns].directive,directiveValue="schemas['"+ns+"']",directiveElm=jQuery('<div jerv-design-js-value-editor-field="" schemadata="'+directiveValue+'" rootNamespace="'+rootNamespace+'">'+directiveName+"</div>"),directiveElm.attr("class","row"),displayElm.append(directiveElm));$compile(displayElm)($scope)}return{link:link,scope:{valueData:"="},templateUrl:JervDesignJsValueEditorService.libPath+"standard-display.html"}}]),angular.module("JervDesignJsValueEditor").directive("jervDesignJsValueEditorField",["JervDesignJsValueEditorService",function(JervDesignJsValueEditorService){function link($scope,element,attrs){$scope.onSave=function(){JervDesignJsValueEditorService.getDataSchema()}}return{link:link,scope:{schemadata:"="},template:'<div class="col-sm-6" ng-if="schemadata.display"> <strong>  <span ng-show="schemadata.title">{{schemadata.title}}</span>   <span ng-hide="schemadata.title">{{schemadata.name}}</span>  </strong> <span>({{schemadata.type}})</span>  <button ng-click="onSave()">save</button> </div><div class="col-sm-6"> <div>Value: {{schemadata.displayValue}}</div></div><div class="col-sm-12"> <textarea ng-model="schemadata.displayValue"></textarea></div>'}}]),angular.module("JervDesignJsValueEditor").directive("jervDesignJsValueEditorFieldBoolean",["JervDesignJsValueEditorService",function(JervDesignJsValueEditorService){function link($scope,element,attrs){}return{link:link,scope:{schemadata:"="},template:'<div class="col-sm-6"> <strong>  <span ng-show="schemadata.title">{{schemadata.title}}</span>   <span ng-hide="schemadata.title">{{schemadata.name}}</span>  </strong> <span>({{schemadata.type}})</span> </div><div class="col-sm-6"> <div>Value: {{schemadata.value | json}}</div></div><div class="col-sm-12"> <input type="checkbox" name="schemadata.name" ng-model="schemadata.value" ng-value="true"></div>'}}]),angular.module("JervDesignJsValueEditor").directive("jervDesignJsValueEditorFieldLiteral",["JervDesignJsValueEditorFilterDataType",function(JervDesignJsValueEditorFilterDataType){function link($scope,element,attrs){$scope.onChange=function(){}}return{link:link,scope:{schemadata:"="},template:'<div class="col-sm-6"> <strong>  <span ng-show="schemadata.title">{{schemadata.title}}</span>   <span ng-hide="schemadata.title">{{schemadata.name}}</span>  </strong> <span>({{schemadata.type}})</span> </div><div class="col-sm-6"> <div>Value: {{schemadata.value | json}}</div></div><div class="col-sm-12"> <input ng-change="onChange()" ng-model="schemadata.value" type="text"/></div>'}}]),angular.module("JervDesignJsValueEditor").directive("jervDesignJsValueEditorFieldNumber",["JervDesignJsValueEditorFilterDataType",function(JervDesignJsValueEditorFilterDataType){function link($scope,element,attrs){$scope.onChange=function(){$scope.schemadata.value=Number($scope.schemadata.value)}}return{link:link,scope:{schemadata:"="},template:'<div class="col-sm-6"> <strong>  <span ng-show="schemadata.title">{{schemadata.title}}</span>   <span ng-hide="schemadata.title">{{schemadata.name}}</span>  </strong> <span>({{schemadata.type}})</span> </div><div class="col-sm-6"> <div>Value: {{schemadata.value | json}}</div></div><div class="col-sm-12"> <input ng-change="onChange()" ng-model="schemadata.value" type="text"/></div>'}}]),angular.module("JervDesignJsValueEditor").directive("jervDesignJsValueEditorFieldString",["JervDesignJsValueEditorFilterDataType",function(JervDesignJsValueEditorFilterDataType){function link($scope,element,attrs){$scope.onChange=function(){$scope.schemadata.value=""+$scope.schemadata.value}}return{link:link,scope:{schemadata:"="},template:'<div class="col-sm-6"> <strong>  <span ng-show="schemadata.title">{{schemadata.title}}</span>   <span ng-hide="schemadata.title">{{schemadata.name}}</span>  </strong> <span>({{schemadata.type}})</span> </div><div class="col-sm-6"> <div>Value: {{schemadata.value | json}}</div></div><div class="col-sm-12"> <input ng-change="onChange()" ng-model="schemadata.value" type="text"/></div>'}}]);
//# sourceMappingURL=jervdesign-js-value-editor.min.js.map